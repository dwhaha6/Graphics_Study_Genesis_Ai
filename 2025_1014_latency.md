## 체크포인트 별로 로봇을 관측할 때 real time으로 랜더링 돼서 나오는 시간이 왜이리 오래 걸릴까?

영상

- gpu를 쓰지 않고 cpu만으로 돌린 시뮬레이션
- 그러나 gpu를 썼을 때보다 훨씬 동영상이 부드러움

```vbnet
┌────────────────────────────────────────────────────────────┐
│                   시뮬레이션 (Episode Loop)                │
└────────────────────────────────────────────────────────────┘
        │
        ▼
(1) CPU에서 정책 실행 (PyTorch forward 호출)
        │
        ▼
(2) GPU로 연산 전송 → GPU 연산 실행
        │
        ▼
(3) CPU는 GPU 결과 기다림 (torch.cuda.synchronize / glFinish 등)
        │
        ▼
(4) CPU가 physics step / 렌더링 호출
        │
        ▼
(5) GPU에서 physics/render 연산 실행
        │
        ▼
(6) CPU가 다시 대기
```
- 즉 CPU가 GPU 연산이 끝나길 기다리느라 병목이 생긴 것

### 그러나 보다 많은 연산량을 요구하는 시뮬레이션에선 GPU의 사용이 필수이므로 무조건 cpu만을 쓰는건 바람직하지 않음

### 기존의 동기화 방식
```python
# GPU 연산
out = model(obs.to(device))
torch.cuda.synchronize()   # CPU가 GPU 끝날 때까지 기다림
env.step(out.cpu().numpy()) # CPU로 복사 + 블록
```
- CPU가 GPU 연산이 끝나기 전까지 아무것도 못 함

### 비동기화 방식
```python
stream = torch.cuda.Stream()
with torch.cuda.stream(stream):
    out = model(obs.to(device, non_blocking=True))

# GPU가 아직 일하는 동안, CPU는 다음 스텝 준비
next_obs = env.get_next_state()
```
- CPU와 GPU가 동시에 일함

## 결론
- 필요에 따라 Genesis의 코드를 수정해 더 효율적인 방식으로 시뮬레이션을 돌릴 필요가 있음

## Genesis에서 한 화면에 다중 씬 띄우기
- "Interactive viewer not supported when managing multiple scenes. Please set show_viewer=False or call del scene.”
    - 뷰어를 동시에 띄우려고 했을 때 나오는 에러 메시지
    - "여러 개의 Scene을 동시에 다룰 땐 인터랙티브 뷰어를 제공하지 않습니다, 뷰어를 끄거나 제거하세요."
## 결론
- Genesis 뷰어는 한 번에 하나의 Scene만을 띄울 수 있음

### 아래 영상은 직접 파이썬 코드를 이용해 6개의 mp4 영상을 합친 결과임

